name: ðŸ“œ Check CHANGELOG update on PR

on:
    pull_request:
        branches:
            - "develop"

jobs:
    formatting-check:
        name: ðŸ“œ Check CHANGELOG update on PR
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - name: Check changelog diff compared to target branch
              # - run: git diff --exit-code --name-only $CI_MERGE_REQUEST_DIFF_BASE_SHA $CI_COMMIT_SHA .gitignore &&  exit 1 || exit 0
                  # git diff develop 29-add-changelog-file --stat | grep CHANGELOG.md
              run: |
                  git fetch origin $GITHUB_BASE_REF
                  HEAD_SHA=$(git rev-parse HEAD)
                  BASE_SHA=$(git rev-parse origin/$GITHUB_BASE_REF)
                  git diff --exit-code $HEAD_SHA $BASE_SHA -- CHANGELOG.md
